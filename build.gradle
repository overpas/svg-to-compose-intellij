plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.6.0'
    id 'org.jetbrains.kotlin.jvm' version '1.6.21'
    id 'io.gitlab.arturbosch.detekt' version '1.20.0'
}

group 'by.overpass'
version '0.3'

repositories {
    mavenCentral()
    maven { url "https://maven.google.com" }
    maven { url "https://jitpack.io" }
}

ext {
    junitVersion = "4.13.2"
}

dependencies {
    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.6.21'
    implementation('com.github.DevSrSouza:svg-to-compose:0.8.1') {
        exclude group: 'xerces', module: 'xercesImpl'
        exclude group: 'xml-apis', module: 'xml-apis'
    }
    testImplementation "junit:junit:$junitVersion"
    testImplementation "org.mockito.kotlin:mockito-kotlin:4.0.0"
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version.set("212.5712.43")
    plugins.set(['com.intellij.java', 'android'])
}

signPlugin {
    certificateChain = System.getenv("CERTIFICATE_CHAIN")
    privateKey = System.getenv("PRIVATE_KEY")
    password = System.getenv("PRIVATE_KEY_PASSWORD")
}

publishPlugin {
    token = System.getenv("PUBLISH_TOKEN")
}

patchPluginXml {
    changeNotes.set("""
      Updated target Intellij version""")
}

test {
    useJUnit()
}